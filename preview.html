<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat Preview</title>

  <!-- Google Font used by overlay -->
  <link href="https://fonts.googleapis.com/css2?family=Teko:wght@300..700&display=swap" rel="stylesheet">

  <!-- Core styles -->
  <link rel="stylesheet" href="base.css">

  <!-- Preview-only overrides -->
  <style>
    body {
      background: transparent;
      font-size: 28px;
      color: #2d3436;
    }
  </style>
</head>
<body>

  <div id="log" class="sl__chat__layout"></div>

  <script type="text/template" id="chatlist_item">
    <div data-from="{from}" data-id="{messageId}">
      <span class="userbox">
        <span class="badges"></span>
        <span class="name">{from}</span>
      </span>

      <span class="messagebox">
        {message}
      </span>
    </div>
  </script>

  <script>
    const log = document.getElementById("log");
    const template = document.getElementById("chatlist_item").innerHTML;

    const users = ["AxelotlVT", "ShadowLink", "PixelFox", "Luna", "ChatGoblin"];
    const messages = [
      "HELLO CHAT ðŸ‘€",
      "this overlay looks sick",
      "pog",
      "AXOLOTL POWER",
      "no sabo inglÃ©s pero ta bonito",
      "ðŸ”¥ðŸ”¥ðŸ”¥"
    ];

    let id = 0;

    function addMessage() {
      const html = template
        .replaceAll("{from}", users[Math.floor(Math.random() * users.length)])
        .replace("{message}", messages[Math.floor(Math.random() * messages.length)])
        .replace("{messageId}", ++id);

      const wrapper = document.createElement("div");
      wrapper.innerHTML = html;
      log.appendChild(wrapper.firstElementChild);

      if (log.children.length > 6) {
        log.removeChild(log.firstElementChild);
      }
    }

    let speed = 2000;
    let interval = setInterval(addMessage, speed);

    window.setSpeed = (newSpeed) => {
      speed = newSpeed;
      clearInterval(interval);
      interval = setInterval(addMessage, speed);
    };

    window.addMessage = addMessage;
  </script>

</body>
</html>
